"" Base Settings
set scrolloff=10                " Keep 10 lines visible when scrolling
set relativenumber              " Show line numbers
set showmode                    " Show current mode (insert, normal, etc.)
set showcmd                     " Show incomplete commands
set smartcase                   " Ignore case in search unless uppercase used
set ignorecase                  " Ignore case for / search unless /C used
set incsearch                   " Show search matches as you type
set hlsearch                    " Highlight all search matches
set visualbell                  " Use visual bell instead of beeping
set ideajoin                    " Use ideajoin for line joining
set clipboard+=unnamed
let mapleader = " "             " Set leader key to Space

"" Plugins
set highlightedyank             " Highlight text on yank (copy)
set easymotion                  " Enable EasyMotion plugin for fast navigation
set which-key                   " Enable which-key support (show key mappings)

set notimeout
" make the popup appear much slower
let g:WhichKey_DefaultDelay = 1000

"" Vim mappings
" Move half page down and center it
nmap <C-d> <C-d>zz
" Move half page up and center it
nmap <C-u> <C-u>zz
" Move to next search item and center the screen
nmap n nzzzv
" Move to previous search item and center the screen
nmap N Nzzzv
" Clear search highlight
let g:WhichKeyDesc_clearhighlight = '<Esc> Clear Search Highlight'
nmap <Esc> :noh<CR><Esc>

"" IdeaVim mappings
"" Refactoring
let g:WhichKeyDesc_refactor = "<leader>r Refactoring"
" Rename element (variable, method, class, etc.)
let g:WhichKeyDesc_refactor_rename = "<leader>rr Rename Element"
nmap <leader>rr <Action>(RenameElement)
" Change method signature
let g:WhichKeyDesc_refactor_changesignature = "<leader>rs Change Signature"
nmap <leader>rs <Action>(ChangeSignature)
" Change type signature
let g:WhichKeyDesc_refactor_changetypesignature = "<leader>rt Change Type Signature"
nmap <leader>rt <Action>(ChangeTypeSignature)

"" Create From Code
let g:WhichKeyDesc_create = "<leader>c Create From Code"
" Extract Method
let g:WhichKeyDesc_create_extractmethod = "<leader>cm Extract Method"
nmap <leader>cm <Action>(ExtractMethod)
" Introduce Variable
let g:WhichKeyDesc_create_introducevariable = "<leader>cv Introduce Variable"
nmap <leader>cv <Action>(IntroduceVariable)
" Inline Variable
let g:WhichKeyDesc_create_inlinevariable = "<leader>cV Inline Variable"
nmap <leader>cV <Action>(Inline)
" Introduce Field
let g:WhichKeyDesc_create_introducefield = "<leader>cf Introduce Field"
nmap <leader>cf <Action>(IntroduceField)
" Introduce Parameter
let g:WhichKeyDesc_create_introduceparameter = "<leader>cip Introduce Parameter"
nmap <leader>cip <Action>(IntroduceParameter)
" Introduce Property
let g:WhichKeyDesc_create_introduceproperty = "<leader>cp Introduce Property"
nmap <leader>cp <Action>(refactoring.introduce.property)

"" Menus
let g:WhichKeyDesc_menus = "<leader>m Menus"
" Run Anything
let g:WhichKeyDesc_menus_runanything = "<leader>ma Run Anything"
nmap <leader>ma <Action>(RunAnything)
" Choose Debug Configuration
let g:WhichKeyDesc_menus_debugconfig = "<leader>md Choose Debug Configuration"
nmap <leader>md <Action>(ChooseDebugConfiguration)
" Choose Run Configuration
let g:WhichKeyDesc_menus_runconfig = "<leader>mr Choose Run Configuration"
nmap <leader>mr <Action>(ChooseRunConfiguration)

"" Navigation
let g:WhichKeyDesc_navigation = "<leader>n Navigation"
" Go to Class
let g:WhichKeyDesc_navigation_gotoclass = "<leader>nc Go To Class"
nmap <leader>nc <Action>(GotoClass)
vmap <leader>nc <Action>(GotoClass)
" Go to File
let g:WhichKeyDesc_navigation_gotofile = "<leader>nf Go To File"
nmap <leader>nf <Action>(GotoFile)
" Go to Symbol
let g:WhichKeyDesc_navigation_gotosymbol = "<leader>nm Go To Symbol"
nmap <leader>nm <Action>(GotoSymbol)
" Go to Action
let g:WhichKeyDesc_navigation_gotoaction = "<leader>na Go To Action"
nmap <leader>na <Action>(GotoAction)
" EasyMotion jump to character (leader+j)
let g:WhichKeyDesc_navigation_easymotion = "<leader>j EasyMotion Jump"
nmap <leader>j <Plug>(easymotion-s)
" Go One Method Up
nmap [[ <Action>(MethodUp)
" Go One Method Down
nmap ]] <Action>(MethodDown)
" Go To Implementation
nmap gi <Action>(GotoImplementation)

"" Errors
let g:WhichKeyDesc_errors = "<leader>e Errors"
" Go to next error
let g:WhichKeyDesc_errors_next = "<leader>en Next Error"
nmap <leader>en <Action>(GotoNextError)
" Go to previous error
let g:WhichKeyDesc_errors_prev = "<leader>ep Previous Error"
nmap <leader>ep <Action>(GotoPreviousError)
" Open Problems tool window
let g:WhichKeyDesc_errors_list = "<leader>el Error List"
nmap <leader>el <Action>(ActivateProblemsViewToolWindow)

"" Documentations
let g:WhichKeyDesc_docs = "<leader>d Docs"
" Show java documentation popup
let g:WhichKeyDesc_docs_quick_java_doc = "<leader>dq Show java documentation popup"
nmap <leader>dq <Action>(QuickJavaDoc)
" Show expression type info popup
let g:WhichKeyDesc_docs_expression_type = "<leader>dt Show expression type info popup"
nmap <leader>dt <Action>(ExpressionTypeInfo)
" Show error description popup
let g:WhichKeyDesc_docs_error_desc = "<leader>de Show error description popup"
nmap <leader>de <Action>(ShowErrorDescription)
" Show quick implementation popup
let g:WhichKeyDesc_docs_quick_implementation = "<leader>di Show quick implementation popup"
nmap <leader>di <Action>(QuickImplementations)

"" GIT
let g:WhichKeyDesc_git = "<leader>g GIT"
" Fetch
let g:WhichKeyDesc_git_fetch = "<leader>gf Fetch"
nmap <leader>gf <Action>(Git.Fetch)

"" Surround with
let g:WhichKeyDesc_surround_with = "<leader>sw Surround with"
vmap <leader>sw <Action>(SurroundWith)
